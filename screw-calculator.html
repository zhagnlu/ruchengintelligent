<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>计算器</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 0;
      margin: 0;
      background-color: #f8f9fa;
      font-size: 16px;
      min-height: 100vh;
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 30px;
    }
    .calculators-wrapper {
      display: flex;
      gap: 30px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .calculator-section {
      flex: 1;
      min-width: 450px;
      max-width: 550px;
      margin-bottom: 25px;
      padding: 30px;
      border: 2px solid #dee2e6;
      border-radius: 12px;
      background-color: white;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      font-size: 18px;
    }
    .calculator-section h3 {
      margin-top: 0;
      color: #495057;
      border-bottom: 2px solid #007BFF;
      padding-bottom: 12px;
      font-size: 26px;
      margin-bottom: 25px;
    }
    label {
      display: block;
      margin-bottom: 15px;
      font-size: 18px;
      color: #495057;
      font-weight: bold;
    }
    input, select {
      display: block;
      margin-bottom: 20px;
      padding: 12px;
      width: 100%;
      box-sizing: border-box;
      font-size: 18px;
      border: 2px solid #dee2e6;
      border-radius: 6px;
      transition: border-color 0.3s ease;
    }
    input:focus, select:focus {
      border-color: #007BFF;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
    }
    select {
      padding: 14px;
      font-size: 20px;
      height: 55px;
      background-color: white;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23495057' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 20px;
      padding-right: 40px;
    }
    select:hover {
      border-color: #007BFF;
    }
    select:focus {
      border-color: #007BFF;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
    }
    button {
      padding: 14px;
      width: 100%;
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 20px;
      font-weight: bold;
      transition: all 0.3s ease;
      margin-top: 8px;
    }
    button:hover {
      background-color: #0056b3;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    #result, #shippingResult {
      margin-top: 25px;
      font-size: 18px;
      padding: 20px;
      border-radius: 8px;
      background-color: #f8f9fa;
      border: 2px solid #dee2e6;
    }
    .result-item {
      margin: 12px 0;
      padding: 10px;
      border-bottom: 1px solid #dee2e6;
      font-size: 18px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .result-item:last-child {
      border-bottom: none;
    }
    .result-label {
      color: #495057;
      font-weight: bold;
      font-size: 18px;
    }
    .result-value {
      color: #007bff;
      font-size: 18px;
      font-weight: bold;
    }
    h2 {
      text-align: center;
      color: #495057;
      margin-bottom: 35px;
      font-size: 36px;
      font-weight: bold;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
    }
    .back-button {
      position: fixed;
      top: 25px;
      right: 25px;
      background: #007BFF;
      color: white;
      padding: 12px 25px;
      border-radius: 6px;
      text-decoration: none;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      z-index: 1000;
    }
    .back-button:hover {
      background: #0056b3;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    @media (max-width: 1200px) {
      .container {
        padding: 25px;
      }
      .calculator-section {
        min-width: 380px;
        padding: 25px;
      }
      h2 {
        font-size: 32px;
      }
      .calculator-section h3 {
        font-size: 24px;
      }
    }
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }
      .calculator-section {
        min-width: 100%;
        padding: 20px;
      }
      h2 {
        font-size: 28px;
      }
      .calculator-section h3 {
        font-size: 22px;
      }
      input, select, button, .result-item {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <a href="cal.html" class="back-button">返回首页</a>
  <div class="container">
    <h2>刀片螺丝计算器</h2>
    <div class="calculators-wrapper">
      <div class="calculator-section">
        <h3>价格计算</h3>
        <label for="mValue">M:</label>
        <select id="mValue">
          <option value="">请选择 M 值</option>
          <option value="18">18</option>
          <option value="20">20</option>
          <option value="22">22</option>
          <option value="24">24</option>
          <option value="27">27</option>
          <option value="30">30</option>
          <option value="33">33</option>
          <option value="36">36</option>
          <option value="39">39</option>
          <option value="42">42</option>
          <option value="48">48</option>
        </select>

        <label for="lValue">L:</label>
        <input type="number" id="lValue" placeholder="Enter L" />

        <label for="quantity">数量:</label>
        <input type="number" id="quantity" placeholder="Enter Quantity" min="1" value="1" />

        <label for="profitMargin">利润率 (%):</label>
        <input type="number" id="profitMargin" placeholder="Enter Profit Margin" min="0" max="100" value="0" step="0.1" />

        <label for="hasNut">带螺母:</label>
        <select id="hasNut">
          <option value="yes">是</option>
          <option value="no">否</option>
        </select>

        <button onclick="calculatePrice()">计算价格</button>
        <div id="result"></div>
      </div>

      <div class="calculator-section">
        <h3>邮费计算</h3>
        <label for="province">选择省份:</label>
        <select id="province">
          <option value="">请选择省份</option>
          <option value="beijing">北京</option>
          <option value="shanghai">上海</option>
          <option value="guangdong">广东</option>
          <option value="jiangsu">江苏</option>
          <option value="zhejiang">浙江</option>
          <option value="sichuan">四川</option>
          <option value="hubei">湖北</option>
          <option value="fujian">福建</option>
          <option value="shandong">山东</option>
          <option value="henan">河南</option>
          <option value="hebei">河北</option>
          <option value="hunan">湖南</option>
          <option value="anhui">安徽</option>
          <option value="jiangxi">江西</option>
          <option value="guangxi">广西</option>
          <option value="yunnan">云南</option>
          <option value="guizhou">贵州</option>
          <option value="shanxi">山西</option>
          <option value="shaanxi">陕西</option>
          <option value="gansu">甘肃</option>
          <option value="qinghai">青海</option>
          <option value="liaoning">辽宁</option>
          <option value="jilin">吉林</option>
          <option value="heilongjiang">黑龙江</option>
          <option value="hainan">海南</option>
          <option value="chongqing">重庆</option>
          <option value="tianjin">天津</option>
          <option value="neimenggu">内蒙古</option>
          <option value="ningxia">宁夏</option>
          <option value="xinjiang">新疆</option>
          <option value="xizang">西藏</option>
        </select>

        <label for="shippingM">M:</label>
        <select id="shippingM">
          <option value="">请选择 M 值</option>
          <option value="18">18</option>
          <option value="20">20</option>
          <option value="22">22</option>
          <option value="24">24</option>
          <option value="27">27</option>
          <option value="30">30</option>
          <option value="33">33</option>
          <option value="36">36</option>
          <option value="39">39</option>
          <option value="42">42</option>
          <option value="48">48</option>
        </select>

        <label for="shippingL">L:</label>
        <input type="number" id="shippingL" placeholder="Enter L" />

        <label for="shippingQuantity">数量:</label>
        <input type="number" id="shippingQuantity" placeholder="Enter Quantity" min="1" value="1" />

        <button onclick="calculateShipping()">计算邮费</button>
        <div id="shippingResult"></div>
      </div>
    </div>
  </div>

  <script>
    function calculatePrice() {
      const m = parseFloat(document.getElementById('mValue').value);
      const l = parseFloat(document.getElementById('lValue').value);
      const quantity = parseInt(document.getElementById('quantity').value) || 1;
      const profitMargin = parseFloat(document.getElementById('profitMargin').value) || 0;
      const hasNut = document.getElementById('hasNut').value === 'yes';

      if (!m || isNaN(l)) {
        document.getElementById('result').innerText = '请选择 M 值并输入有效的 L 值';
        return;
      }

      let price = 0;
      let add_point = 0;
      if (m === 18 || m === 20 || m === 22 || m === 24 ) {
       add_point = 0.02 
      }
      else if ( m === 27 || m === 30) {
        add_point = 0.03
      }
      else if ( m === 33 ) {
        add_point = 0.04
      }
      else if ( m === 36 ) {
        add_point = 0.05
      }
      else if ( m === 39 ) {
        add_point = 0.06
      }
      else if (m === 42 ) {
        add_point = 0.07
      }
      else if (m === 48 ) {
        add_point = 0.08
      } else {
        document.getElementById('result').innerText = 'M value must be one of: 18, 20, 22, 24, 27, 30, 33, 36, 39, 42, 48.';
        return;
      }

      // 计算螺丝成本
      const screwUnitCost = 0.00617 * m * m * (l/1000.0 + add_point) * 0.88 * 9.5 * 0.96;
      
      // 计算螺母成本（如果选择加螺母）
      let nutUnitCost = 0;
      if (hasNut) {
        if (m === 18) {
          nutUnitCost = 0.39
        } else if (m === 20) {
          nutUnitCost = 0.53
        } else if (m === 22) {
          nutUnitCost = 0.68 
        } else if (m === 24) {
          nutUnitCost = 0.86
        } else if (m === 27) {
          nutUnitCost = 1.37
        } else if (m === 30) {
          nutUnitCost = 1.68
        } else if (m === 33) {
          nutUnitCost = 2.3
        } else if (m === 36) {
          nutUnitCost = 2.94
        } else if (m === 39) {
          nutUnitCost = 3.74
        } else if (m === 42) {
          nutUnitCost = 4.6
        } else if (m === 48) {
          nutUnitCost = 6.7
        }
      }
      
      // 总单位成本
      const unitCost = screwUnitCost + nutUnitCost;
      const unitPrice = unitCost * (1 + profitMargin / 100);
      const totalCost = unitCost * quantity;
      const totalPrice = unitPrice * quantity;
      
      // 计算重量（螺丝重量 + 螺母重量）
      const screwWeight = 0.00617 * m * m * (l/1000.0) * quantity;
      let nutWeight = 0;
      if (m === 12 || m=== 14 || m=== 16) {
        nutWeight = 0.05
      } else if (m === 18) {
        nutWeight = 0.065
      } else if (m === 20) {
        nutWeight = 0.09
      } else if (m === 22) {
        nutWeight = 0.1
      } else if (m === 24) {
        nutWeight = 0.13
      } else if (m === 27) {
        nutWeight = 0.2
      } else if (m === 30) {
        nutWeight = 0.275
      } else if (m === 33) {
        nutWeight = 0.35
      } else if (m === 36) {
        nutWeight = 0.45
      } else if (m === 39) {
        nutWeight = 0.585
      } else if (m === 42) {
        nutWeight = 0.645
      } else if (m === 48) {
        nutWeight = 1
      }
      nutWeight = hasNut ? nutWeight * quantity : 0;
      const totalWeight = screwWeight + nutWeight ;

      const resultHTML = `
        <div class="result-item">
          <span class="result-label">单个成本:</span>
          <span class="result-value">¥${unitCost.toFixed(2)}</span>
        </div>
        <div class="result-item">
          <span class="result-label">单个售价:</span>
          <span class="result-value">¥${unitPrice.toFixed(2)}</span>
        </div>
        <div class="result-item">
          <span class="result-label">成本总价:</span>
          <span class="result-value">¥${totalCost.toFixed(2)}</span>
        </div>
        <div class="result-item">
          <span class="result-label">销售总价:</span>
          <span class="result-value">¥${totalPrice.toFixed(2)}</span>
        </div>
        <div class="result-item">
          <span class="result-label">螺丝重量:</span>
          <span class="result-value">${screwWeight.toFixed(2)} kg</span>
        </div>
        ${hasNut ? `
        <div class="result-item">
          <span class="result-label">螺母重量:</span>
          <span class="result-value">${nutWeight.toFixed(2)} kg</span>
        </div>
        ` : ''}
        <div class="result-item">
          <span class="result-label">总重量:</span>
          <span class="result-value">${totalWeight.toFixed(2)} kg</span>
        </div>
      `;
      
      document.getElementById('result').innerHTML = resultHTML;
    }

    function calculateShipping() {
      const province = document.getElementById('province').value;
      const m = parseFloat(document.getElementById('shippingM').value);
      const l = parseFloat(document.getElementById('shippingL').value);
      const quantity = parseInt(document.getElementById('shippingQuantity').value) || 1;

      if (!province) {
        document.getElementById('shippingResult').innerText = '请选择省份';
        return;
      }

      if (!m || isNaN(l)) {
        document.getElementById('shippingResult').innerText = '请选择 M 值并输入有效的 L 值';
        return;
      }

      // 基础运费计算（示例）
      const weight = 0.00617 * m * m * (l/1000.0) * quantity;
      let nutWeight = 0;
      if (m === 12 || m=== 14 || m=== 16) {
        nutWeight = 0.05
      } else if (m === 18) {
        nutWeight = 0.065
      } else if (m === 20) {
        nutWeight = 0.09
      } else if (m === 22) {
        nutWeight = 0.1
      } else if (m === 24) {
        nutWeight = 0.13
      } else if (m === 27) {
        nutWeight = 0.2
      } else if (m === 30) {
        nutWeight = 0.275
      } else if (m === 33) {
        nutWeight = 0.35
      } else if (m === 36) {
        nutWeight = 0.45
      } else if (m === 39) {
        nutWeight = 0.585
      } else if (m === 42) {
        nutWeight = 0.645
      } else if (m === 48) {
        nutWeight = 1 
      }
      const totalWeight = weight + nutWeight * quantity;
      
      let baseShippingCost = 0;
      let add_cost = 0;

      // 根据省份设置基础运费
      switch(province) {
        case 'jiangsu':
        case 'zhejiang':
        case 'shanghai':
        case 'anhui':
            baseShippingCost = 5;
            add_cost = 1;
            break;
        case 'fujian':
        case 'guangdong':
        case 'jiangxi':
        case 'shandong':
        case 'henan':
        case 'hebei':
        case 'hunan':
        case 'hubei':
        case 'beijing':
        case 'tianjin':
            baseShippingCost = 6;
            add_cost = 3;
            break;
        case 'yunnan':
        case 'guizhou':
        case 'sichuan':
        case 'chongqing':
        case 'shanxi':
        case 'shaanxi':
        case 'guangxi':
        case 'hainan':
        case 'liaoning':
        case 'jilin':
        case 'heilongjiang':
            baseShippingCost = 8;
            add_cost = 4;
            break;
        case 'gansu':
        case 'qinghai':
        case 'ningxia':
        case 'neimenggu':
            baseShippingCost = 15;
            add_cost = 5;
            break;
        case 'xinjiang':
        case 'xizang':
            baseShippingCost = 20;
            add_cost = 20;
            break;
        default:
            baseShippingCost = 0;
            add_cost = 0;
      }

      // 根据重量增加运费
      const weightShippingCost = Math.ceil(totalWeight - 1) * add_cost;
      const totalShippingCost = baseShippingCost + weightShippingCost;

      const resultHTML = `
        <div class="result-item">
          <span class="result-label">重量:</span>
          <span class="result-value">${totalWeight.toFixed(2)} kg</span>
        </div>
        <div class="result-item">
          <span class="result-label">基础运费:</span>
          <span class="result-value">¥${baseShippingCost.toFixed(2)}</span>
        </div>
        <div class="result-item">
          <span class="result-label">重量运费:</span>
          <span class="result-value">¥${weightShippingCost.toFixed(2)}</span>
        </div>
        <div class="result-item">
          <span class="result-label">总运费:</span>
          <span class="result-value">¥${totalShippingCost.toFixed(2)}</span>
        </div>
      `;
      
      document.getElementById('shippingResult').innerHTML = resultHTML;
    }
  </script>
</body>
</html>